# WIP: Synthetic Data Generator Tool

This project generates synthetic data for diabetes research using a natural language query. The user provides a query (e.g., "Generate data for a 28-year-old woman with two pregnancies and slightly elevated insulin levels"), and the app uses machine learning techniques to generate synthetic diabetes data based on the provided features.

## Features

- Extracts relevant features from natural language queries
- Generates synthetic diabetes data based on real-world statistical characteristics.
- Supports querying for individuals with varying health parameters.

## Requirements

To run this project, you need to install the required Python packages, included in requirements.txt

### Required Packages:

- pandas==2.2.3
- click==8.1.8
- ollama==0.4.6
- numpy==2.2.1

### Installation Steps:

1. Clone the repository:

    ```bash
    git clone https://github.com/artisokka/synth-gen.git
    ```

2. Navigate to the project folder:

    ```bash
    cd synth-gen
    ```

3. Install the required packages using `requirements.txt`:

    ```bash
    pip install -r requirements.txt
    ```

## Usage

Once the dependencies are installed, you can run the program via the command line. Use the following command to generate synthetic data:

```bash
python main.py "Generate data for a 28-year-old woman with two pregnancies and slightly elevated insulin levels."
```

## Use of AI

The installation instructions above were generated by OpenAI. GitHub Copilot was used to set up basic structure for the program, and to generate most of the comments. AI was used to automate the code generation on how to calculate statistical variance. By the end of the project, AI was used to automate code generation especially in "generate_synthetic_data".

## Explanation of approach

The data_generator -class extraxts information from the query (extract_features) which calls parse_with_tinyllama to parse the query using ollama's tinyllama-model. The parsed query is passed to parse_data -function, which parses the features into a data structure.

That data structure is passed to generate_synthetic_data which finds given values and filters the dataset to find similar data points. If a value is missing (=None), it will calculate a synthetic data point for it based on the data set it filtered out. The result is a list of synthetic attributes based on the queried patient.

## Limitations and issues

- Tinyllama was used due to time constraints (download time, mostly). An unexpected issue I ran into was the AI model starting to write me short stories when I asked for synthetic data.

- Another example of strange behavior includes the inability to extract data from natural language and generate a list of features found in the query:

```bash
python main.py "Generate data for a 28-year-old woman with two pregnancies and slightly elevated insulin levels."
```

Features extracted for a 28-year-old woman with two pregnancies and sli ghtlly elevated insuli n levels:

1. Pregnancies: False positive (not applicable)
2. Glucose: False positive (not applicable)
3. Blood_pressure: Unknown (not available)
4. Skin_thickness: Unknown (not available)
5. Insuli n levels: True negative (low insulin levels)
6. BMI: False positive (not applicable)
7. Diabetes pedigrree function: False positive (not applicable)
8. Age: True negative (non-elderly woman)
9. Outcome: None

- In another iteration round, my AI started speaking french to me:

Examiné et extrait les suivants features d'une personne à 28 ans avec deux grosses de la couche et d'un niveau élevé d'insuliin:
germination_date, glucose, blood_pressure, skin_thickness, insuliin, bmi, diabetes_pedigrree_function, age, outcome

- I'm unsure if the reason is my choice in LLM-model, as tinyllama is quite compact

- I tried to combat this strange behavior by asking an AI how to write an effective prompt to achieve what I wanted, with a slight improvement in my results

- Sometimes the program runs into a data formatting issue that crashes the program (unexpected None-values)

- Some generated data is "nan" resulting from those None -values generated by AI

- Rounding of numbers not implemented

## How to develop further

- Refining of the generated data is needed.
- More data validity checks need to be in place.
- Improvements on the parsing of the query.
- More finely tuned and robust LLM recommended.
- Prettifying output data: rounding of numbers.
- Improvements on code architecture: data_generator is a very bloated class